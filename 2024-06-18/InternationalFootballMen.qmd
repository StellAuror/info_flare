```{r}
pacman::p_load(
  "tidyverse",
  "ggtext",
  "worldfootballR"
)
```

```{r}
url <- "https://raw.githubusercontent.com/martj42/international_results/master/results.csv"
dfMatch <- read.csv(url) |>
  mutate(
    date = as.Date(date, foramt = "%Y-%m-%d") 
  )
```

```{r}
lfCountry <- "Germany"
dfMatch |>
  filter(home_team == lfCountry | away_team == lfCountry) |>
  mutate(
    team = lfCountry,
    oteam = if_else(home_team == country, away_team, home_team),
    result = home_score - away_score,
    result = case_when(
      result == 0 ~ "draw",
      result < 0 ~ "loss",
      T ~ "win"
    ),
    m = month(date),
    y = year(date),
    d = day(date)
  ) |>
  group_by(y, result) |>
  summarise(n = n()) |>
  ggplot(aes(
    x = y,
    y = n,
    fill = result,
    color = result
  )) +
    geom_col(position = "fill")
```

